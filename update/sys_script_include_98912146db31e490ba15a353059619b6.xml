<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>public</access>
        <active>true</active>
        <api_name>x_snc_devtools.DocumentationAPI</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description/>
        <name>DocumentationAPI</name>
        <script><![CDATA[var DocumentationAPI = Class.create();
DocumentationAPI.prototype = {
    
	initialize: function(strAppSysId)
	{
		this.m_bInit = false;
		this.m_strAppName = 'UNDEFINED';
		this.m_strAppVersion = '';
		
		this.m_strAppSysId = GetStringValue(strAppSysId);
		var grApp = new GlideRecord('sys_app');
		if (grApp.get(this.m_strAppSysId) == true)
		{
			this.m_bInit = true;
			this.m_strAppName = GetStringValue(grApp.getValue('name'));
			this.m_strAppVersion = GetStringValue(grApp.getValue('version'));
		}
    
	},
	
	RenderHeader: function()
	{
		return '<h1>'+this.m_strAppName+' '+this.m_strAppVersion+'</h1>';
	},
	
	RenderScriptIncludes: function()
	{
		if (this.m_bInit == false)
		{
			return this.RenderError();
		}
		var grSSI = new GlideRecord('sys_script_include');
		grSSI.addQuery('sys_scope','=',this.m_strAppSysId);
		grSSI.addQuery('access','=','public');
		grSSI.orderBy('name');
		grSSI.query();

		var strScriptIncludes = '';
		while (grSSI.next())
		{
			var strDescription = HtmlEncode(grSSI.getValue('description'));
			strScriptIncludes = strScriptIncludes + '<p><b>'+grSSI.getValue('name')+'</b>&#160;'+strDescription+'</p>';
		}
		return strScriptIncludes;
	},
	
	RenderTestStepConfigurations: function()
	{
		if (this.m_bInit == false)
		{
			return this.RenderError();
		}	
		var grSC = new GlideRecord('sys_atf_step_config');
		grSC.addQuery('sys_scope','=',this.m_strAppSysId);
		grSC.orderBy('name');
		grSC.query();

		var strHTML = '<ul>';
		while (grSC.next())
		{
			strHTML += '<li>';
			strHTML += '<a href="/sys_atf_step_config.do?sys_id=' ;
			strHTML += grSC.sys_id;
			strHTML += '">';
			strHTML += grSC.getValue('name');
			strHTML += '</a>&#160;';
			strHTML += grSC.getValue('html_description');
			strHTML += '</li>';
		}
		strHTML += '</ul>';
		return strHTML;	
	},
	
	RenderError: function()
	{
		return '<p style="color:red">ERROR: DocumentationAPI is not initialized!</p>';
	},

    type: 'DocumentationAPI'
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-01-20 15:26:20</sys_created_on>
        <sys_id>98912146db31e490ba15a353059619b6</sys_id>
        <sys_mod_count>8</sys_mod_count>
        <sys_name>DocumentationAPI</sys_name>
        <sys_package display_value="DevTools WORK IN PROGRESS" source="x_snc_devtools">d689f6901bd38450a89720a8ec4bcbfd</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="DevTools WORK IN PROGRESS">d689f6901bd38450a89720a8ec4bcbfd</sys_scope>
        <sys_update_name>sys_script_include_98912146db31e490ba15a353059619b6</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-01-20 15:55:10</sys_updated_on>
    </sys_script_include>
</record_update>
